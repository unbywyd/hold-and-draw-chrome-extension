window.pluginPressAndDraw=new function(){let e,t,n="#3d34a5",o=2,s="Control",i="Shift",r=!1,a=1,d=!1,l=document.createElement("canvas");l.id="press-and-draw-canvas",l.width=window.innerWidth,l.height=window.innerHeight,l.style.display="none";let h=document.createElement("style");h.type="text/css",document.head.appendChild(h),h.appendChild(document.createTextNode("\n            #press-and-draw-canvas {\n                position: fixed;\n                z-index: 999999999999999;\n                top: 0;\n                left:0;\n                width: 100%;\n                height: 100%;      \n                transition: opacity .3s;      \n            }\n        ")),document.body.appendChild(l);const u=l.getContext("2d");let v,c,m=[],p=[];const w=s=>{u.beginPath(),u.moveTo(e[0],e[1]),u.strokeStyle=n,u.lineWidth=o,u.lineCap="round",u.lineJoin="round",u.lineTo(s[0],s[1]),u.stroke(),e=s,(e=>{let[n,o]=t,[s,i]=e,r=n,a=o;if(v){let e=m[m.length-1],t=s>e?"+":"-";t!=v&&e!=s&&(v=t,r=s,a=i)}else v=s>n?"+":"-";if(c){let e=p[p.length-1],t=i>e?"+":"-";t!=c&&e!=i&&(c=t,a=i,r=s)}else c=i>o?"+":"-";m.push(s),p.push(i),t=[r,a]})(s)},E=s=>{if(d=!0,e=s,t=s,m=[],p=[],v=null,c=null,r){let[e,t]=s;u.beginPath(),u.fillStyle=n,u.arc(e,t,2*o,0,2*Math.PI),u.fill()}},L=e=>{if(!e.currentTarget)return[0,0];const t=e.currentTarget.getBoundingClientRect(),n=e.targetTouches[0];return[n.clientX-t.left,n.clientY-t.top]},y=e=>{d&&w([e.offsetX,e.offsetY])},g=e=>{d||(e.preventDefault(),l.addEventListener("mousemove",y,!1),E([e.offsetX,e.offsetY]))},f=e=>{(e=>1==(1&e))(e.buttons)&&!d&&g(e)},C=s=>{r&&(()=>{var s=10*o;let[i,r]=t||e,[a,d]=e;var l=a-i,h=d-r,v=Math.atan2(h,l);u.beginPath(),u.lineWidth=1.4*o,u.strokeStyle=n,u.lineCap="round",u.lineJoin="round",u.moveTo(a,d),u.lineTo(a-s*Math.cos(v-Math.PI/6),d-s*Math.sin(v-Math.PI/6)),u.moveTo(a,d),u.lineTo(a-s*Math.cos(v+Math.PI/6),d-s*Math.sin(v+Math.PI/6)),u.stroke()})(),d&&(d=!1,s.currentTarget.removeEventListener("mousemove",y,!1))},k=e=>{d||(e.preventDefault(),E(L(e)))},T=e=>{d&&w(L(e))},M=e=>{d=!1};let P=!1;l.addEventListener("transitionend",e=>{P||(u.clearRect(0,0,l.width,l.height),l.style.display="none")});let b=!1,_=e=>{(e.key.toLowerCase()==s.toLowerCase()&&!b||e.key.toLowerCase()==i.toLowerCase()&&!r)&&(b=!0,P=1,u.clearRect(0,0,l.width,l.height),l.style.pointerEvents="all",l.style.display="block",l.style.opacity=a),e.key.toLowerCase()!=i.toLowerCase()||r||(r=!0)},z=e=>{P=0,l.style.pointerEvents="none",l.style.opacity=0,b=!1,r=!1},I=()=>{l.width=window.innerWidth,l.height=window.innerHeight};function x(e){if(b)return e.deltaY>0&&o>=3?(o-=1,document.dispatchEvent(new CustomEvent("hold_draw_size_change",{detail:o}))):o<=101&&(o+=1,document.dispatchEvent(new CustomEvent("hold_draw_size_change",{detail:o}))),e.preventDefault(),e.stopPropagation(),!1}this.status=!1,this.switch=(e=>{this.status!=e&&(e?(this.begin(),this.status=!0):(this.destroy(),this.status=!1))}),this.updateOptions=(({color:e,press_key:t,opacity:r,size:d,arrow_key:l})=>{e&&(n=e),t&&(s=t),l&&(i=l),d&&(o=parseInt(d)),null!=r&&(a=parseFloat(r)/10)}),this.begin=(()=>{I(),document.addEventListener("wheel",x,{passive:!1}),window.addEventListener("resize",I),document.addEventListener("keydown",_,!0),document.addEventListener("keyup",z,!0),l.addEventListener("touchstart",k,!1),l.addEventListener("touchend",M,!1),l.addEventListener("touchcancel",M,!1),l.addEventListener("touchmove",T,!1),l.addEventListener("mousedown",g,!1),l.addEventListener("mouseup",C,!1),l.addEventListener("mouseout",C,!1),l.addEventListener("mouseenter",f,!1)}),this.destroy=(()=>{window.removeEventListener("resize",I),document.removeEventListener("wheel",x,{passive:!1}),document.removeEventListener("keydown",_,!0),document.removeEventListener("keyup",z,!0),l.removeEventListener("touchstart",k,!1),l.removeEventListener("touchend",M,!1),l.removeEventListener("touchcancel",M,!1),l.removeEventListener("touchmove",T,!1),l.removeEventListener("mousedown",g,!1),l.removeEventListener("mouseup",C,!1),l.removeEventListener("mouseout",C,!1),l.removeEventListener("mouseenter",f,!1)})};